<app-loading *ngIf="spin === true"></app-loading>
<div class="d-flex justify-content-between m-2">
    <button mat-raised-button [routerLink]="['/dispatches']" color="warn">Назад</button>
    <h2>Таблица истории отгрузок</h2>
    <div style="width: 10%"></div>
</div>

<div class="container-fluid my-3 w-100">
    <table class="table table-hover table-responsive">
        <thead>
        <tr>
            <th scope="col">ID отгрузки</th>
            <th scope="col">Дата</th>
            <th scope="col">Статус</th>
            <th scope="col">ФИО заказчика</th>
            <th scope="col">ФИО сотрудника</th>
        </tr>
        </thead>
        <tbody>
        <tr *ngFor="let item of dispatches" style="cursor: pointer"
            [ngClass]="{back_color1:item.status_id===1, back_color2:item.status_id===2, back_color3:item.status_id===3}">
            <th scope="row">{{item.dispatch_id}}</th>
            <td>{{item.dispatch_date | date:'dd.MM.yyyy HH:mm:ss z':'+0300'}}</td>
            <td>{{item.status_name}}</td>
            <td>
                <ng-template
                        *ngIf="item.cus_surname !== undefined else cus_fio">
                    {{item.cus_surname}} {{item.cus_name}} {{item.cus_pat}}
                </ng-template>
                <ng-template #cus_fio>
                    {{item.cus_fio}}
                </ng-template>
            </td>
            <td>
                <ng-template *ngIf="item.emp_surname !== undefined else emp_fio">
                    {{item.emp_surname}} {{item.emp_name}} {{item.emp_pat}}
                </ng-template>
                <ng-template #emp_fio>
                    {{item.emp_fio}}
                </ng-template>
            </td>
        </tr>
        </tbody>
    </table>
</div>
